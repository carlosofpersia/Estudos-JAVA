package br.com.caelum.jdbc;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

import br.com.caelum.jdbc.modelo.Produto;

public class TesteInsercaoProduto {

	private static void salvaProduto(Connection con, Produto mesa) throws SQLException {

		String sql = "insert into Produto (nome, descricao) values(?, ?)";

		try (PreparedStatement statement = con.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS)) {
			statement.setString(1, mesa.getNome());
			statement.setString(2, mesa.getDescricao());

			statement.execute();

			try (ResultSet rs = statement.getGeneratedKeys()) {
				if (rs.next()) {
					int id = rs.getInt("id");
					mesa.setId(id);
				}
			}

		}

	}

	public static void main(String[] args) throws SQLException {

		Produto mesa = new Produto("Mesa Azul", "Mesa com 4 pés");

		try (Connection con = new ConnectionPool().getConnection()) {

		}

		System.out.println(mesa);

	}
}
